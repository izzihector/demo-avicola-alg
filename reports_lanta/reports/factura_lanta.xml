<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <report
          id="factura_lanta"
          model="account.move"
          string="Factura Lanta"
          report_type="qweb-pdf"
          name="reports_lanta.factura_e"/>


       <template id="factura_e">
            <t t-call="web.html_container">
              <t t-foreach="docs" t-as="o">
                <t t-if="o.type == 'out_invoice'">
                   <t t-if="o.state == 'posted'">
                      <t t-call="web.basic_layout">
                        <div class="page">
                           <div class="row">
                              <div class="col-xs-9" style="margin-left: 15px;">
                                    <p style="font-size: 12px !important;"><strong>Factura Nro. : </strong><span t-field="o.name"> </span></p>
                                    <p style="font-size: 12px !important;"><strong>Lugar y Fecha de Emisión : </strong><br/><span t-field="o.company_id.city"/> <span t-field="o.invoice_date"/></p>
                                    <p style="font-size: 12px"><strong>Nombre y Apellido o Razón Social : </strong><span t-field="o.partner_id.name"></span></p>
                                    <p style="font-size: 12px"><strong>RIF : </strong>
                                        <span t-esc="o.partner_id.vat"/>
                                    </p>
                                    <p style="font-size: 12px"><strong>Dirección Fiscal : </strong><span t-field="o.partner_id.street"/> <span t-field="o.partner_id.street2"/></p>
                                    <p style="font-size: 12px"><strong>Ciudad : </strong><span t-field="o.partner_id.city" ></span> <t t-esc="o.partner_id.state_id.name" /> </p>
                                    <p style="font-size: 12px"><strong>Lugar de despacho : </strong><span t-field="o.partner_shipping_id.name"/></p>
                                    <p style="font-size: 12px"><strong>Dirección de despacho : </strong><span t-field="o.partner_shipping_id.street"/></p>
                                    <p style="font-size: 12px !important;"><strong>Facturado por:  </strong><span t-field="o.create_uid"></span></p>

                              </div>
                               <p style="color:white"> -----</p>
                              <div class="col-xs-8" style="margin-left: 100px;">
                                    <p style="font-size: 12px !important;"><strong>Condiciones: </strong><span t-field="o.invoice_payment_term_id.name"/></p>
                                    <p style="font-size: 12px !important;"><strong>Fecha de vencimiento : </strong><span t-field="o.invoice_date_due"/></p>
                                    <p style="font-size: 12px"><strong>Codigo : </strong><span t-esc="o.partner_id.id"></span></p>
                                    <p style="font-size: 12px"><strong> Telefono : </strong><span t-field="o.partner_id.phone"/></p>
                                    <p style="font-size: 12px"><strong>Nro. Pedido : </strong><span t-field="o.invoice_origin"> </span></p>
                                    <p style="font-size: 12px"><strong>Nota de Carga : </strong><span t-field="o.loading_note"></span></p>
<!--                                    <p style="font-size: 12px"><strong>Forma de pago : </strong><span t-esc="o.x_studio_forma_de_pago"></span></p>-->
                                    <p style="font-size: 12px !important;"><strong>Revisado por:  </strong><span t-field="o.write_uid"></span></p>

                              </div>
                           </div>
                        </div>
                        <table class="table table-bordered">
                           <tbody class="sale_tbody">
                                <thead>
                                    <tr>
                                        <th name="th_transporte" class="text-center" style="font-size: 12px !important;">Transporte</th>
                                        <th name="th_placa" class="text-center" style="font-size: 12px !important;">Placa</th>
                                         <th name="th_nombre" class="text-center" style="font-size: 12px !important;">Nombre del Conductor</th>
                                        <th name="th_cedula" class="text-center" style="font-size: 12px !important;">Cedula</th>
                                    </tr>
                                </thead>
                                 <td class="text-center" style="font-size: 12px !important;">
                                        <span t-field="o.transport" />
                                    </td>
                                    <td class="text-center" style="font-size: 12px !important;">
                                        <span t-field="o.car_plate" />
                                    </td>
                                    <td class="text-center" style="font-size: 12px !important;">
                                        <span t-field="o.date_driver" />
                                    </td>
                                    <td class="text-center" style="font-size: 12px !important;">
                                        <span t-field="o.identification_driver" />
                                 </td>
                           </tbody>
                        </table>
                          <br/>
                        <div align="center">
                            <t t-if="o.currency_id.name == 'Bs.' ">
                                <p><strong> FACTURA EN BOLIVARES</strong></p>
                            </t>
                            <t t-else="o.currency_id.name == 'USD' ">
                                <p><strong> FACTURA EN DOLARES</strong></p>
                            </t>
                        </div>
                        <table  class="table table-bordered">
                           <tbody class="sale_tbody">
                                <thead>
                                    <tr>
                                        <th name="th_description_normal" class="text-center" style="font-size: 12px !important; width: 15px">Codigo</th>
                                        <th name="th_produc_normal" class="text-center" style="font-size: 12px !important; width: 300px">Descripción</th>
                                        <th name="th_produc_dosis" class="text-center" style="font-size: 12px !important; width: 15px">Dosís</th>
                                        <th name="th_produc_uom" class="text-center" style="font-size: 12px !important; width: 15px">Unidad</th>
                                        <th name="th_produc_qty" class="text-center" style="font-size: 12px !important;">Cantidad</th>
                                        <th name="th_produc_pre" class="text-center" style="font-size: 12px !important;">Presentación</th>
                                        <th name="th_produc_pre_qty" class="text-center" style="font-size: 12px !important; width: 15px">#Und.</th>
                                        <th name="th_produc_precio" class="text-center" style="font-size: 12px !important;">Precio Unit.</th>
                                        <th name="th_produc_precio" class="text-center" style="font-size: 12px !important;">Total</th>
                                    </tr>
                                </thead>
                                <t t-if="o.invoice_line_ids">
                                    <tr t-foreach="o.invoice_line_ids" t-as="line">
                                        <t t-if="line">
                                            <td style="font-size: 12px !important;">
                                                <span t-field="line.product_id.default_code" />
                                            </td>
                                            <td style="font-size: 12px !important;">
                                                <span t-field="line.product_id.name" />
                                            </td>
                                            <td style="font-size: 12px !important;">
                                                <span t-field="line.dose_kgton" />
                                            </td>
                                            <td style="font-size: 12px !important;">
                                                <span t-field="line.product_uom_id.name"/>
                                            </td>
                                            <td style="font-size: 12px !important;"  align="right">
                                                <span t-field="line.quantity" align="right"/>
                                            </td>
                                            <td style="font-size: 12px !important;">
                                                <span t-field="line.product_packaging_id.name"/>
                                            </td>
                                            <t t-if="line.product_packaging_id" align="right">
                                                <td style="font-size: 12px !important;">
                                                    <span t-esc="'{0:,.3f}'.format(int(line.quantity / line.product_packaging_id.qty))"/>
                                                </td>
                                             </t>
                                            <t t-else="line.product_packaging_id = False" align="right">
                                              <td style="font-size: 12px !important;" align="right">0</td>
                                            </t>
                                            <td align="right" style="font-size: 12px !important;">
                                                <t t-if="line.price_string">
                                                        <span t-esc="line.price_string"/>
                                               </t>
                                                <t t-else="line.price_string = False" align="right">
                                                        <span t-esc="'{0:,.2f}'.format(float(line.price_unit))" align="right"/>
                                                </t>
                                            </td>
                                            <td style="font-size: 12px" align="right">
                                                <span t-esc="'{0:,.2f}'.format(float(line.price_subtotal))" align="right"/>
                                            </td>
                                        </t>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                           <p style="font-size: 12px !important;">NOTA: (E) VENTA EXENTA EN VIRTUD DEL ARTICULO 18, NUMERALES 3 Y 11 DE LA LEY DE IMPUESTO AL VALOR AGREGADO (I.V.A.)</p>
                        <div class="border">
                             <div class="row" >
                                    <div class="col-xs-3">
                                        <table t-if="o.account_tax_ids" style="margin-left: 18px; width:450px" >
                                           <tbody class="sale_tbody">
                                                <thead>
                                                    <tr>
                                                        <th name="th_impuesto" class="text-center" style="font-size: 13px !important;">Conceptos</th>
                                                        <th name="th_base" class="text-center" style="font-size: 13px !important;" >Base Imponible</th>
                                                        <th name="th_IVA" class="text-center" style="font-size: 13px !important;">Impuesto al Valor Agregado.:(I.V.A)</th>
                                                    </tr>
                                                </thead>
                                               <t t-if="o.account_tax_ids">
                                                    <tr t-foreach="o.account_tax_ids" t-as="line_tax">
                                                        <td style="font-size: 12px !important;"  class="text-center: center" align="center">
                                                            <span t-field="line_tax.tax_id.name"/>
                                                        </td>
                                                        <td style="font-size: 12px !important;"  class="text-right: right" align="right">
                                                            <span t-field="line_tax.base_tax" t-options='{"precision": 2}'/>
                                                        </td>
                                                        <td style="font-size: 12px !important;"  class="text-right: right" align="right">
                                                            <span t-field="line_tax.tax_total" t-options='{"precision": 2}'/>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>
                                    </div>
                                <table style="margin-bottom:0px; margin-left:60px; width:350px ; padding: 0px; 5px;">
                                      <t t-if="o.account_tax_ids">
                                          <tr t-foreach="o.account_tax_ids" t-as="total_tax">
                                              <t t-if="total_tax.tax_total == 0 and total_tax.base_tax > 0" t-as="exento">
                                                  <th name="th_total" style="font-size: 13px">Total Exento : </th>
                                                  <th style="font-size: 12px"><span t-esc="'{0:,.2f}'.format(float(total_tax.base_tax))"/></th>
                                              </t>
                                          </tr>
                                      </t>
                                      <tr>
                                        <th name="th_b_imponible"  style="font-size: 13px;">Total Base Imponible :</th>
                                        <th style="font-size: 12px"><span t-esc="'{0:,.2f}'.format(float(o.amount_untaxed))"/></th>
                                      </tr>
                                       <t t-if="o.account_tax_ids">
                                          <tr t-foreach="o.account_tax_ids" t-as="total_tax">
                                              <t t-if="total_tax.tax_total == 0 and total_tax.base_tax > 0" t-as="exento" style="font-size: 12px !important;">
                                                  <th name="th_b_subtotal" style="font-size: 13px">Sub Total : </th>
                                                  <th style="font-size: 12px"><span  t-esc="'{0:,.2f}'.format(float(total_tax.base_tax+o.amount_untaxed))"/></th>
                                              </t>
                                          </tr>
                                      </t>
                                      <tr>
                                        <th name="th_impuesto" style="font-size: 13px" >Impuesto : </th>
                                          <th style="font-size: 12px"><span  t-esc="'{0:,.2f}'.format(float(o.amount_tax))"/></th>
                                      </tr>
                                      <tr>
                                          <t t-if="o.currency_id.name == 'Bs.' ">
                                              <th name="th_total" style="font-size: 13px">Total Factura en BS. : </th>
                                              <th style="font-size: 12px"><span t-esc="'{0:,.2f}'.format(float(o.amount_total))"/></th>
                                          </t>
                                          <t t-else="o.currency_id.name == 'USD' ">
                                                <th name="th_total" style="font-size: 13px">Total Factura en US$. : </th>
                                                <th style="font-size: 12px"><span t-esc="'{0:,.2f}'.format(float(o.amount_total))"/></th>
                                          </t>
                                      </tr>
                                </table>
                            </div>
                        </div>
                      </t>
                   </t>
            	</t>
              </t>
            </t>
        </template>

     </data>
</odoo>
